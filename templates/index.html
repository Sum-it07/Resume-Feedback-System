<!DOCTYPE html>
<html lang="en">

<head>
    <title>Resume Feedback System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <div class="container">

        <h1>Resume Feedback System</h1>

        <div class="card">
            <form method="post" enctype="multipart/form-data">

                <label>Resume</label>
                <input type="file" name="resume_file" accept=".pdf,.docx,.txt">

                <label>Job Description</label>
                <input type="file" name="jd_file" accept=".pdf,.docx,.txt">

                <button type="submit">Analyze</button>

            </form>
        </div>

        {% if result %}

        <div class="card">
            <h2>Extracted Skills</h2>

            <p><strong>Resume Skills</strong></p>
            <div class="chip-group">
                {% for skill in result.resume_skill %}
                <span class="chip neutral">{{ skill }}</span>
                {% endfor %}
            </div>

            <p><strong>Job Skills</strong></p>
            <div class="chip-group">
                {% for skill in result.jd_skill %}
                <span class="chip neutral">{{ skill }}</span>
                {% endfor %}
            </div>
        </div>

        <div class="card">
            <h2>Skill Analysis</h2>

            <p><strong>Matched</strong></p>
            <div class="chip-group">
                {% for skill in result["match"]["matched"] %}
                <span class="chip matched">{{ skill }}</span>
                {% endfor %}
            </div>

            {% if result["match"].get("partial") %}
            <p><strong>Partial</strong></p>
            <div class="chip-group">
                {% for key, vals in result["match"]["partial"].items() %}
                    {% for skill in vals %}
                    <span class="chip partial">{{ skill }}</span>
                    {% endfor %}
                {% endfor %}
            </div>
            {% endif %}

            <p><strong>Missing</strong></p>
            <div class="chip-group">
                {% for skill in result["match"]["missing"] %}
                <span class="chip missing">{{ skill }}</span>
                {% endfor %}
            </div>

            <p class="coverage">Coverage: {{ result["match"]["coverage"] }}%</p>
        </div>

        <div class="card">
            <h2>Feedback</h2>
            <p>{{ result.feedback }}</p>
        </div>

        {% endif %}

    </div>

</body>

</html>
